<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link href="../bootstrap-5.2.2-dist\css\bootstrap.css" rel="stylesheet" />
    <script src="../js\jquery-3.6.1.js"></script>
</head>
<body>
    <div class="container border border-dark m-5 p-5">
        <div class="row">
        <div class="col-md-6">
                <h2 class="text-success">EMPLOYEE LIST</h2>
        </div>
        <div class="col-md-6 text-end">
                <a href="employeeform.html" class="btn btn-success">ADD NEW</a>
        </div>
        </div>
        <br />
        <table class="table table-bordered table-striped table-hover">
            <thead class="table-success">
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Age</th>
                    <th>City</th>
                    <th>Salary</th>
                    <th></th>
                </tr>
            </thead>
            <tbody id="tbody">
            
            </tbody>
        </table>
    </div>
    <script>
        $(document).ready(function () {
            $.ajax({
                method: "GET",
                url: "http://localhost/employeeproject/public/api/employee",
                success: function (data) {
                   $.each(data.data,function(key,value){
                  $('tbody').append(" <tr>" +
                    "<td>"+ value.id+"</td>" +
                    "<td>"+ value.Name+"</td>" +
                    "<td>"+ value.Age+"</td>" +
                    "<td>"+ value.City+"</td>" +
                    "<td>" + value.Salary+"</td>" +
                    "<td>"+"<a  href='editemployee.html?id="+value.id+"' class='btn btn-primary btn-sm m-1'>Edit</a>" +
                        "<button class='btn btn-danger btn-sm' data-id="+value.id+">Delete</button>" +
                        "</td></tr>");
                   
                    }); 
                    
                    //Delete data

                    $(".btn-danger").click(function () { 
                
                   var id=$(this).data("id");
                 
                            $.ajax({
                                method: "DELETE",
                                url: "http://localhost/employeeproject/public/api/employee/"+id,
                                success: function () {

                                    window.location.href = "emplist.html";
                                },
                                error: function (response) {
                                    alert('Error..');
                                },
                            });
                    });
                },
            });
              
        });
         
    </script>
    </body>
</html>